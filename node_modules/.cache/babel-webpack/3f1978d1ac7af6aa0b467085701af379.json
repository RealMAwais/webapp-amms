{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Admin/Desktop/Web Developement Course/ANGULAR/employeeapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { employeeData } from '../employee-dashboard/employee.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../shared/api.service\";\nimport * as i3 from \"@angular/fire/compat/firestore\";\nimport * as i4 from \"@angular/fire/compat/storage\";\nexport class EditformComponent {\n  //------------------------------GLOBAL VARIABLES END HERE----------------------//\n  constructor(fb, ApiService, fireStoreDb, storage) {\n    this.fb = fb;\n    this.ApiService = ApiService;\n    this.fireStoreDb = fireStoreDb;\n    this.storage = storage; //--------------GLOBAL VARIABLES DECLARED HERE---------------------------------//\n\n    this.employeeModelObject = new employeeData();\n    this.buttonText = 'Submit';\n    this.myLocalArray = [];\n    this.formattedArray = {};\n    this.sortingOrder = 'ascending'; // ---------------------------------------------//Edit Employee Method//---------------------------------------------//\n\n    this.editForm = new FormGroup({\n      name: new FormControl('', Validators.required),\n      phone: new FormControl('', Validators.required),\n      email: new FormControl('', [Validators.required, Validators.pattern(\"^[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,4}$\")]),\n      address: new FormControl('', [Validators.required]),\n      picture: new FormControl('', Validators.required)\n    });\n  }\n\n  ngOnInit() {}\n\n  onEdit(id) {\n    const mySelectedIndexFilter = this.myLocalArray.filter(data => data.id === id);\n    this.editForm.setValue({\n      name: mySelectedIndexFilter[0].name,\n      phone: mySelectedIndexFilter[0].phone,\n      email: mySelectedIndexFilter[0].email,\n      address: mySelectedIndexFilter[0].address,\n      picture: mySelectedIndexFilter[0].picture\n    });\n    this.base64Image = mySelectedIndexFilter[0].picture;\n    this.editableId = id;\n  } //----------------------------------------------------//Update Method//------------------------------------------------//\n\n\n  onUpdate() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.ApiService.ngxServiceLoader();\n\n      var uploadedImage = Date.now();\n      const filePath = `employeeImages/${uploadedImage}`;\n      const snap = yield _this.storage.upload(filePath, _this.selectedFile);\n\n      _this.getUrlForImage(snap);\n    })();\n  }\n\n  getUrlForImage(snap) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      const url = yield snap.ref.getDownloadURL();\n\n      if (url) {\n        const userObject = _this2.editForm.value;\n        debugger;\n        userObject.id = _this2.editableId;\n        userObject['picture'] = url; // it will upload my picture on same index\n\n        _this2.ApiService.updateUser(userObject, _this2.editableId);\n\n        _this2.editForm.reset();\n      }\n    })();\n  }\n\n}\n\nEditformComponent.ɵfac = function EditformComponent_Factory(t) {\n  return new (t || EditformComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ApiService), i0.ɵɵdirectiveInject(i3.AngularFirestore), i0.ɵɵdirectiveInject(i4.AngularFireStorage));\n};\n\nEditformComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: EditformComponent,\n  selectors: [[\"app-editform\"]],\n  decls: 31,\n  vars: 2,\n  consts: [[\"id\", \"editModalCenter\", \"tabindex\", \"-1\", \"role\", \"dialog\", \"aria-labelledby\", \"ModalCenterTitle\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [\"role\", \"document\", 1, \"modal-dialog\", \"modal-dialog-centered\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"ModalLongTitle\", 1, \"modal-title\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn-close\"], [1, \"modal-body\"], [3, \"formGroup\"], [1, \"avatar\", 2, \"text-align\", \"center\"], [1, \"rounded-circle\", 2, \"width\", \"80px\", \"height\", \"80px\", \"object-fit\", \"cover\", 3, \"src\"], [2, \"text-align\", \"center\", \"margin\", \"5px\"], [\"id\", \"file-upload\", \"type\", \"file\", \"formArrayName\", \"picture\", 3, \"change\"], [1, \"form-group\", \"mb-3\"], [\"for\", \"name\"], [\"type\", \"name\", \"id\", \"name\", \"formControlName\", \"name\", 1, \"form-control\"], [\"for\", \"email\"], [\"type\", \"email\", \"id\", \"email\", \"formControlName\", \"email\", 1, \"form-control\"], [\"for\", \"phone\"], [\"type\", \"tel\", \"id\", \"phone\", \"formControlName\", \"phone\", 1, \"form-control\"], [\"for\", \"address\"], [\"type\", \"text\", \"id\", \"address\", \"formControlName\", \"address\", 1, \"form-control\"], [\"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-dark\", \"mb-3\", 3, \"click\"]],\n  template: function EditformComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"div\", 2);\n      i0.ɵɵelementStart(3, \"div\", 3);\n      i0.ɵɵelementStart(4, \"h2\", 4);\n      i0.ɵɵtext(5, \"Edit Employee Data\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(6, \"button\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 6);\n      i0.ɵɵelementStart(8, \"form\", 7);\n      i0.ɵɵelementStart(9, \"div\", 8);\n      i0.ɵɵelement(10, \"img\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"div\", 10);\n      i0.ɵɵelementStart(12, \"input\", 11);\n      i0.ɵɵlistener(\"change\", function EditformComponent_Template_input_change_12_listener($event) {\n        return ctx.addFile($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"div\", 12);\n      i0.ɵɵelementStart(14, \"label\", 13);\n      i0.ɵɵtext(15, \"Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(16, \"input\", 14);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"div\", 12);\n      i0.ɵɵelementStart(18, \"label\", 15);\n      i0.ɵɵtext(19, \"Email address\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(20, \"input\", 16);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"div\", 12);\n      i0.ɵɵelementStart(22, \"label\", 17);\n      i0.ɵɵtext(23, \"Phone\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(24, \"input\", 18);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"div\", 12);\n      i0.ɵɵelementStart(26, \"label\", 19);\n      i0.ɵɵtext(27, \"Address\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(28, \"input\", 20);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(29, \"button\", 21);\n      i0.ɵɵlistener(\"click\", function EditformComponent_Template_button_click_29_listener() {\n        return ctx.onUpdate();\n      });\n      i0.ɵɵtext(30, \" Update \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"formGroup\", ctx.editForm);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"src\", ctx.base64Image, i0.ɵɵsanitizeUrl);\n    }\n  },\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJlZGl0Zm9ybS5jb21wb25lbnQuY3NzIn0= */\"]\n});","map":{"version":3,"sources":["C:/Users/Admin/Desktop/Web Developement Course/ANGULAR/employeeapp/src/app/editform/editform.component.ts"],"names":["FormGroup","FormControl","Validators","employeeData","i0","i1","i2","i3","i4","EditformComponent","constructor","fb","ApiService","fireStoreDb","storage","employeeModelObject","buttonText","myLocalArray","formattedArray","sortingOrder","editForm","name","required","phone","email","pattern","address","picture","ngOnInit","onEdit","id","mySelectedIndexFilter","filter","data","setValue","base64Image","editableId","onUpdate","ngxServiceLoader","uploadedImage","Date","now","filePath","snap","upload","selectedFile","getUrlForImage","url","ref","getDownloadURL","userObject","value","updateUser","reset","ɵfac","EditformComponent_Factory","t","ɵɵdirectiveInject","FormBuilder","AngularFirestore","AngularFireStorage","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","EditformComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵlistener","EditformComponent_Template_input_change_12_listener","$event","addFile","EditformComponent_Template_button_click_29_listener","ɵɵadvance","ɵɵproperty","ɵɵsanitizeUrl","styles"],"mappings":"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","sourcesContent":["import { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { employeeData } from '../employee-dashboard/employee.model';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/forms\";\r\nimport * as i2 from \"../shared/api.service\";\r\nimport * as i3 from \"@angular/fire/compat/firestore\";\r\nimport * as i4 from \"@angular/fire/compat/storage\";\r\nexport class EditformComponent {\r\n    //------------------------------GLOBAL VARIABLES END HERE----------------------//\r\n    constructor(fb, ApiService, fireStoreDb, storage) {\r\n        this.fb = fb;\r\n        this.ApiService = ApiService;\r\n        this.fireStoreDb = fireStoreDb;\r\n        this.storage = storage;\r\n        //--------------GLOBAL VARIABLES DECLARED HERE---------------------------------//\r\n        this.employeeModelObject = new employeeData;\r\n        this.buttonText = 'Submit';\r\n        this.myLocalArray = [];\r\n        this.formattedArray = {};\r\n        this.sortingOrder = 'ascending';\r\n        // ---------------------------------------------//Edit Employee Method//---------------------------------------------//\r\n        this.editForm = new FormGroup({\r\n            name: new FormControl('', Validators.required),\r\n            phone: new FormControl('', Validators.required),\r\n            email: new FormControl('', [Validators.required, Validators.pattern(\"^[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,4}$\")]),\r\n            address: new FormControl('', [Validators.required]),\r\n            picture: new FormControl('', Validators.required)\r\n        });\r\n    }\r\n    ngOnInit() {\r\n    }\r\n    onEdit(id) {\r\n        const mySelectedIndexFilter = this.myLocalArray.filter((data) => data.id === id);\r\n        this.editForm.setValue({\r\n            name: mySelectedIndexFilter[0].name,\r\n            phone: mySelectedIndexFilter[0].phone,\r\n            email: mySelectedIndexFilter[0].email,\r\n            address: mySelectedIndexFilter[0].address,\r\n            picture: mySelectedIndexFilter[0].picture\r\n        });\r\n        this.base64Image = mySelectedIndexFilter[0].picture;\r\n        this.editableId = id;\r\n    }\r\n    //----------------------------------------------------//Update Method//------------------------------------------------//\r\n    async onUpdate() {\r\n        this.ApiService.ngxServiceLoader();\r\n        var uploadedImage = Date.now();\r\n        const filePath = `employeeImages/${uploadedImage}`;\r\n        const snap = await this.storage.upload(filePath, this.selectedFile);\r\n        this.getUrlForImage(snap);\r\n    }\r\n    async getUrlForImage(snap) {\r\n        const url = await snap.ref.getDownloadURL();\r\n        if (url) {\r\n            const userObject = this.editForm.value;\r\n            debugger;\r\n            userObject.id = this.editableId;\r\n            userObject['picture'] = url; // it will upload my picture on same index\r\n            this.ApiService.updateUser(userObject, this.editableId);\r\n            this.editForm.reset();\r\n        }\r\n    }\r\n}\r\nEditformComponent.ɵfac = function EditformComponent_Factory(t) { return new (t || EditformComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ApiService), i0.ɵɵdirectiveInject(i3.AngularFirestore), i0.ɵɵdirectiveInject(i4.AngularFireStorage)); };\r\nEditformComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: EditformComponent, selectors: [[\"app-editform\"]], decls: 31, vars: 2, consts: [[\"id\", \"editModalCenter\", \"tabindex\", \"-1\", \"role\", \"dialog\", \"aria-labelledby\", \"ModalCenterTitle\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [\"role\", \"document\", 1, \"modal-dialog\", \"modal-dialog-centered\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"ModalLongTitle\", 1, \"modal-title\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn-close\"], [1, \"modal-body\"], [3, \"formGroup\"], [1, \"avatar\", 2, \"text-align\", \"center\"], [1, \"rounded-circle\", 2, \"width\", \"80px\", \"height\", \"80px\", \"object-fit\", \"cover\", 3, \"src\"], [2, \"text-align\", \"center\", \"margin\", \"5px\"], [\"id\", \"file-upload\", \"type\", \"file\", \"formArrayName\", \"picture\", 3, \"change\"], [1, \"form-group\", \"mb-3\"], [\"for\", \"name\"], [\"type\", \"name\", \"id\", \"name\", \"formControlName\", \"name\", 1, \"form-control\"], [\"for\", \"email\"], [\"type\", \"email\", \"id\", \"email\", \"formControlName\", \"email\", 1, \"form-control\"], [\"for\", \"phone\"], [\"type\", \"tel\", \"id\", \"phone\", \"formControlName\", \"phone\", 1, \"form-control\"], [\"for\", \"address\"], [\"type\", \"text\", \"id\", \"address\", \"formControlName\", \"address\", 1, \"form-control\"], [\"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-dark\", \"mb-3\", 3, \"click\"]], template: function EditformComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0);\r\n        i0.ɵɵelementStart(1, \"div\", 1);\r\n        i0.ɵɵelementStart(2, \"div\", 2);\r\n        i0.ɵɵelementStart(3, \"div\", 3);\r\n        i0.ɵɵelementStart(4, \"h2\", 4);\r\n        i0.ɵɵtext(5, \"Edit Employee Data\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(6, \"button\", 5);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(7, \"div\", 6);\r\n        i0.ɵɵelementStart(8, \"form\", 7);\r\n        i0.ɵɵelementStart(9, \"div\", 8);\r\n        i0.ɵɵelement(10, \"img\", 9);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(11, \"div\", 10);\r\n        i0.ɵɵelementStart(12, \"input\", 11);\r\n        i0.ɵɵlistener(\"change\", function EditformComponent_Template_input_change_12_listener($event) { return ctx.addFile($event); });\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(13, \"div\", 12);\r\n        i0.ɵɵelementStart(14, \"label\", 13);\r\n        i0.ɵɵtext(15, \"Name\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(16, \"input\", 14);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(17, \"div\", 12);\r\n        i0.ɵɵelementStart(18, \"label\", 15);\r\n        i0.ɵɵtext(19, \"Email address\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(20, \"input\", 16);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(21, \"div\", 12);\r\n        i0.ɵɵelementStart(22, \"label\", 17);\r\n        i0.ɵɵtext(23, \"Phone\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(24, \"input\", 18);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(25, \"div\", 12);\r\n        i0.ɵɵelementStart(26, \"label\", 19);\r\n        i0.ɵɵtext(27, \"Address\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(28, \"input\", 20);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(29, \"button\", 21);\r\n        i0.ɵɵlistener(\"click\", function EditformComponent_Template_button_click_29_listener() { return ctx.onUpdate(); });\r\n        i0.ɵɵtext(30, \" Update \");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(8);\r\n        i0.ɵɵproperty(\"formGroup\", ctx.editForm);\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"src\", ctx.base64Image, i0.ɵɵsanitizeUrl);\r\n    } }, styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJlZGl0Zm9ybS5jb21wb25lbnQuY3NzIn0= */\"] });\r\n"]},"metadata":{},"sourceType":"module"}