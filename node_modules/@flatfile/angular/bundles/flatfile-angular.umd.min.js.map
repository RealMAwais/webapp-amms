{"version":3,"sources":["../../../projects/angular-adapter/src/lib/flatfile-button.component.ts","../../../projects/angular-adapter/src/lib/flatfile-adapter.module.ts"],"names":["FlatfileButtonComponent","this","onInit","EventEmitter","onUpload","onLaunch","onClose","onComplete","onError","isImporterLoaded","prototype","ngOnInit","_this","token","flatfileImporter","console","log","Object","assign","mountUrl","apiUrl","on","res","next","error","ngOnDestroy","close","launch","catch","e","Component","args","selector","template","Input","Output","ViewChild","read","ElementRef","static","NgModule","declarations","imports","CommonModule","exports"],"mappings":"0dAaA,SAAAA,IA2BYC,KAAAC,OAAS,IAAIC,EAAAA,aACbF,KAAAG,SAAW,IAAID,EAAAA,aACfF,KAAAI,SAAW,IAAIF,EAAAA,aACfF,KAAAK,QAAU,IAAIH,EAAAA,aACdF,KAAAM,WAAa,IAAIJ,EAAAA,aACjBF,KAAAO,QAAU,IAAIL,EAAAA,aAIxBF,KAAAQ,kBAA4B,SAIrBT,EAAAU,UAAAC,SAAA,WAAA,IAAAC,EAAAX,KACL,OAAKA,KAAKY,WAQsB,IAArBC,EAAAA,kBACTC,QAAQC,IAAI,6DACZf,KAAKQ,kBAAmB,KAI1BR,KAAKa,iBAAmBA,EAAAA,iBAAiBb,KAAKY,MAAKI,OAAAC,OAAAD,OAAAC,OAAA,GAC7CjB,KAAKkB,SAAW,CAAEA,SAAUlB,KAAKkB,UAAa,IAC9ClB,KAAKmB,OAAS,CAAEA,OAAQnB,KAAKmB,QAAW,KAG9CnB,KAAKa,iBAAiBO,GAAG,QAAQ,SAACC,GAAQ,OAAAV,EAAKV,OAAOqB,KAAKD,MAC3DrB,KAAKa,iBAAiBO,GAAG,UAAU,SAACC,GAAQ,OAAAV,EAAKR,SAASmB,KAAKD,MAC/DrB,KAAKa,iBAAiBO,GAAG,UAAU,SAACC,GAAQ,OAAAV,EAAKP,SAASkB,KAAKD,MAC/DrB,KAAKa,iBAAiBO,GAAG,SAAS,SAACC,GAAQ,OAAAV,EAAKN,QAAQiB,KAAKD,WAC7DrB,KAAKa,iBAAiBO,GAAG,YAAY,SAACC,GAAQ,OAAAV,EAAKL,WAAWgB,KAAKD,QAtBjEP,QAAQS,MACN,kEAEFvB,KAAKQ,kBAAmB,KAsBrBT,EAAAU,UAAAe,YAAA,WACLxB,KAAKa,iBAAiBY,SAGjB1B,EAAAU,UAAAiB,OAAA,WAAA,IAAAf,EAAAX,KACLA,KAAKa,iBAAiBa,SAASC,OAAM,SAACC,GACpCjB,EAAKJ,QAAQe,KAAK,CAAEC,MAAOK,iCAzEhCC,EAAAA,UAASC,KAAA,CAAC,CACTC,SAAU,kBACVC,SAAU,8ZAcR,6FAQDC,EAAAA,wBACAA,EAAAA,sBACAA,EAAAA,sBACAC,EAAAA,yBACAA,EAAAA,yBACAA,EAAAA,wBACAA,EAAAA,2BACAA,EAAAA,wBACAA,EAAAA,oBAEAC,EAAAA,UAASL,KAAA,CAAC,MAAO,CAAEM,KAAMC,EAAAA,WAAYC,QAAQ,aCtChD,iCALCC,EAAAA,SAAQT,KAAA,CAAC,CACRU,aAAc,CAACzC,GACf0C,QAAS,CAACC,EAAAA,cACVC,QAAS,CAAC5C","sourcesContent":["import {\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n  ViewChild,\n} from '@angular/core';\n\nimport { flatfileImporter, IEvents, IFlatfileImporter } from '@flatfile/sdk';\n\n@Component({\n  selector: 'flatfile-button',\n  template: `\n    <button (click)=\"launch()\" [disabled]=\"!isImporterLoaded\">\n      <div #ref [class.hide]=\"!isImporterLoaded\">\n        <ng-content></ng-content>\n      </div>\n      <span *ngIf=\"!ref && !ref.innerHTML.trim() && isImporterLoaded\"\n        >ðŸ”¼ Upload with Flatfile</span\n      >\n      <span *ngIf=\"!isImporterLoaded\">\n        ðŸ…§ Failed to Load Flatfile Importer\n      </span>\n    </button>\n  `,\n  styles: [\n    `\n      .hide {\n        display: none;\n      }\n    `,\n  ],\n})\nexport class FlatfileButtonComponent implements OnInit, OnDestroy {\n  @Input() token: string;\n  @Input() mountUrl?: string;\n  @Input() apiUrl?: string;\n  @Output() onInit = new EventEmitter<IEvents['init']>();\n  @Output() onUpload = new EventEmitter<IEvents['upload']>();\n  @Output() onLaunch = new EventEmitter<IEvents['launch']>();\n  @Output() onClose = new EventEmitter<IEvents['close']>();\n  @Output() onComplete = new EventEmitter<IEvents['complete']>();\n  @Output() onError = new EventEmitter<IEvents['error']>();\n\n  @ViewChild('ref', { read: ElementRef, static: true }) ref: ElementRef;\n\n  isImporterLoaded: boolean = true;\n\n  private flatfileImporter: IFlatfileImporter;\n\n  public ngOnInit(): void {\n    if (!this.token) {\n      console.error(\n        'ðŸ“¥ Flatfile Importer ERROR - \"token\" missing via @Input()'\n      );\n      this.isImporterLoaded = false;\n      return;\n    }\n\n    if (typeof flatfileImporter === 'undefined') {\n      console.log('ðŸ“¥ Flatfile Importer ERROR - importer failed to load');\n      this.isImporterLoaded = false;\n      return;\n    }\n\n    this.flatfileImporter = flatfileImporter(this.token, {\n      ...(this.mountUrl ? { mountUrl: this.mountUrl } : {}),\n      ...(this.apiUrl ? { apiUrl: this.apiUrl } : {}),\n    });\n\n    this.flatfileImporter.on('init', (res) => this.onInit.next(res));\n    this.flatfileImporter.on('upload', (res) => this.onUpload.next(res));\n    this.flatfileImporter.on('launch', (res) => this.onLaunch.next(res));\n    this.flatfileImporter.on('close', (res) => this.onClose.next(res));\n    this.flatfileImporter.on('complete', (res) => this.onComplete.next(res));\n  }\n\n  public ngOnDestroy(): void {\n    this.flatfileImporter.close();\n  }\n\n  public launch(): void {\n    this.flatfileImporter.launch().catch((e: Error) => {\n      this.onError.next({ error: e });\n    });\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FlatfileButtonComponent } from './flatfile-button.component';\n\n@NgModule({\n  declarations: [FlatfileButtonComponent],\n  imports: [CommonModule],\n  exports: [FlatfileButtonComponent],\n})\nexport class FlatfileAdapterModule {}\n"]}